<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>3DPrintCraft | –ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #000c18; color: white; padding: 20px; }
        .card { background: #001f3f; padding: 25px; border-radius: 12px; border: 1px solid #00d4ff; max-width: 500px; margin: auto; }
        input, textarea, button { width: 100%; padding: 12px; margin: 8px 0; border-radius: 6px; border: 1px solid #1a3a5a; background: #000; color: white; box-sizing: border-box; }
        button { background: #00d4ff; color: #000; font-weight: bold; cursor: pointer; border: none; }
        button:hover { background: #fff; }
        .item { background: #002b53; padding: 10px; margin-top: 10px; display: flex; justify-content: space-between; align-items: center; border-radius: 6px; }
        .del-btn { background: #ff4d4d; width: auto; padding: 5px 10px; color: white; }
    </style>
</head>
<body>

<div class="card">
    <h2>üõ† –ö–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä–∞–º–∏ (–•–º–∞—Ä–∞)</h2>
    <input type="text" id="name" placeholder="–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É">
    <textarea id="desc" placeholder="–û–ø–∏—Å —Ç–æ–≤–∞—Ä—É"></textarea>
    <input type="number" id="price" placeholder="–¶—ñ–Ω–∞ (–≥—Ä–Ω)">
    <input type="text" id="img" placeholder="–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ñ–æ—Ç–æ (URL)">
    <button onclick="saveToCloud()">–û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ –Ω–∞ —Å–∞–π—Ç</button>
    
    <div id="list" style="margin-top:20px;">
        <h3>–¢–æ–≤–∞—Ä–∏ –≤ –±–∞–∑—ñ:</h3>
        </div>
</div>

<script>
    const supabaseUrl = 'https://kkyrhxuwllawvfqltgil.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtreXJoeHV3bGxhd3ZmcWx0Z2lsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg0MDMzNzUsImV4cCI6MjA4Mzk3OTM3NX0.r8DPctn9mF9EFLbU5_5cLrBcN-7oIo8p02BktKxKSVM';
    const _supabase = supabase.createClient(supabaseUrl, supabaseKey);

    async function saveToCloud() {
        const name = document.getElementById('name').value;
        const desc = document.getElementById('desc').value;
        const price = document.getElementById('price').value;
        const img = document.getElementById('img').value || 'https://via.placeholder.com/150';

        if(!name || !price) return alert("–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –Ω–∞–∑–≤—É —Ç–∞ —Ü—ñ–Ω—É!");

        const { error } = await _supabase.from('products').insert([{ name, desc, price: parseInt(price), img }]);
        
        if (error) alert("–ü–æ–º–∏–ª–∫–∞: " + error.message);
        else { alert("–î–æ–¥–∞–Ω–æ!"); location.reload(); }
    }

    async function loadList() {
        const { data: products } = await _supabase.from('products').select('*');
        const listDiv = document.getElementById('list');
        if(products) {
            products.forEach(p => {
                listDiv.innerHTML += `
                    <div class="item">
                        <span>${p.name}</span>
                        <button class="del-btn" onclick="deleteProd(${p.id})">–í–∏–¥–∞–ª–∏—Ç–∏</button>
                    </div>`;
            });
        }
    }

    async function deleteProd(id) {
        if(confirm("–í–∏–¥–∞–ª–∏—Ç–∏?")) {
            await _supabase.from('products').delete().eq('id', id);
            location.reload();
        }
    }
    loadList();
</script>
</body>
</html>